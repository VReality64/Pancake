<!DOCTYPE html>
<html>
<head>
	<meta charset="US-ASCII">
	<title>MIDI uploader</title>
    <script src="lib/midi/inc/jasmid/stream.js"></script>
    <script src="lib/midi/inc/jasmid/midifile.js"></script>
    <script src="lib/midi/inc/jasmid/replayer.js"></script>
    <script src="lib/midi/inc/Base64.js"></script>
    <script src="lib/midi/inc/base64binary.js"></script>
    <script src="lib/midi/js/MIDI/AudioDetect.js"></script>
    <script src="lib/midi/js/MIDI/LoadPlugin.js"></script>
    <script src="lib/midi/js/MIDI/Player.js"></script>
    <script src="lib/midi/js/MIDI/Plugin.js"></script>
    <script src="lib/midi/js/Window/DOMLoader.script.js"></script>
    <script src="lib/midi/js/Window/DOMLoader.XMLHttp.js"></script>
    <script src="lib/midi/js/Window/Event.js"></script>
<body>



<input type="file" id="files" name="file" ></input>
<form>
Title: <input type="text" name="title">
<!--Image: ???-->
</form>
<button id="upload" onclick="">Upload</button>



<script>

function readMidi(evt) {
	
	var files = document.getElementById('files').files;
	if (!files.length) {
	      alert('Please select a file!');
	      return;
	}
	
	var file = files[0];
	var reader = new FileReader();
	var myMidi;
	
	var blob = file.slice(0, file.size-1)
	reader.readAsBinaryString(blob);
	
	reader.onloadend = function(evt) {
		if (evt.target.readyState == FileReader.DONE) {
			
			var midiString = String(evt.target.result);
			myMidi = MidiFile(midiString);
		}
	}
}

document.getElementById('files').addEventListener('change', readMidi, false);

</script>

</body>
</html>